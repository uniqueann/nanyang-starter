import{E as e,g as s,a,h as t,n as r,s as i,o as l,c as o,w as n,i as u,b as d,d as c,e as h,r as m,F as p,f,j as b,k as _,t as g,l as y,m as B}from"./index.694e3e81.js";import{_ as j}from"./uni-search-bar.bc0a52d4.js";import{r as k}from"./uni-app.es.1115fc62.js";import{_ as v,a as w}from"./uni-list.d7cbd7f2.js";import{_ as M}from"./uni-load-state.062b503e.js";import{_ as R}from"./unicloud-db.b0e9ab69.js";import{s as x}from"./uni-status-bar.2ccd1929.js";import{t as C}from"./publish-time.4a9adb49.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";import"./uni-icons.d5573f5e.js";const L=e.database();const P=H({components:{statusBar:x},computed:{inputPlaceholder:e=>"en"==s("CURRENT_LANG")?"Please enter the search content":"请输入搜索内容",colList(){return[L.collection("uni-cms-articles").where(this.where).field("thumbnail,title,publish_date,user_id").getTemp(),L.collection("uni-id-users").field("_id,nickname").getTemp()]}},data:()=>({where:'"article_status" == 1',showRefresh:!1,listHeight:0,mpButtonPlaceholderSize:87,navBarHeight:44}),async onReady(){this.listHeight="auto"},methods:{initNavBarSize(){let e=uni.getMenuButtonBoundingClientRect();this.mpButtonPlaceholderSize=e.width+10,this.navBarHeight=a().system.toLowerCase().includes("ios")?44:48},publishTime:e=>C(e),searchClick(e){t(),r({url:"/uni_modules/uni-cms-article/pages/search/search"})},retry(){this.refresh()},refresh(){this.$refs.udb.loadData({clear:!0},(()=>{i()}))},loadMore(){this.$refs.udb.loadMore()},onqueryerror(e){console.error(e)}},onPullDownRefresh(){this.refresh()},onReachBottom(){this.$refs.udb.loadMore()}},[["render",function(e,s,a,t,r,i){const x=f("statusBar"),C=u,H=k(b("uni-search-bar"),j),L=y,P=B,N=k(b("uni-list-item"),v),T=k(b("uni-load-state"),M),$=k(b("uni-list"),w),z=k(b("unicloud-db"),R);return l(),o(C,{class:"pages"},{default:n((()=>[d(C,{class:"placeholder-bar"},{default:n((()=>[d(x),d(C,{style:c({height:`${r.navBarHeight}px`})},null,8,["style"])])),_:1}),d(C,{class:"nav-box"},{default:n((()=>[d(C,{class:"nav",style:c({height:`${r.navBarHeight}px`})},{default:n((()=>[d(C,{class:"uni-search-box"},{default:n((()=>[d(H,{ref:"searchBar",radius:"100",cancelButton:"none",disabled:"",placeholder:i.inputPlaceholder},null,8,["placeholder"]),d(C,{class:"cover-search-bar",onClick:i.searchClick},null,8,["onClick"])])),_:1})])),_:1},8,["style"])])),_:1}),d(z,{ref:"udb",onError:i.onqueryerror,collection:i.colList,"page-size":10,orderby:"publish_date desc"},{default:n((({data:e,pagination:s,hasMore:a,loading:t,error:u,options:f})=>[d($,{class:"uni-list",border:!1,style:c({height:r.listHeight})},{default:n((()=>[(l(!0),h(p,null,m(e,((e,s)=>(l(),o(N,{to:"/uni_modules/uni-cms-article/pages/detail/detail?id="+e._id,key:s},{header:n((()=>[d(L,{class:"thumbnail",src:e.thumbnail,mode:"aspectFill"},null,8,["src"])])),body:n((()=>[d(C,{class:"main"},{default:n((()=>[d(P,{class:"title"},{default:n((()=>[_(g(e.title),1)])),_:2},1024),d(C,{class:"info"},{default:n((()=>[d(P,{class:"author"},{default:n((()=>[_(g(e.user_id[0]?e.user_id[0].nickname:""),1)])),_:2},1024),d(P,{class:"publish_date"},{default:n((()=>[_(g(i.publishTime(e.publish_date)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])))),128)),d(T,{onNetworkResume:i.refresh,state:{data:e,pagination:s,hasMore:a,loading:t,error:u},onLoadMore:i.loadMore},null,8,["onNetworkResume","state","onLoadMore"])])),_:2},1032,["style"])])),_:1},8,["onError","collection"])])),_:1})}],["__scopeId","data-v-c409acdb"]]);export{P as default};
