import{E as e,g as a,a as s,h as t,n as r,s as i,o as l,c as o,w as n,i as d,b as u,d as c,e as h,r as p,F as m,f,j as _,k as b,t as g,l as y,m as B,p as j,q as k}from"./index.60a01f59.js";import{_ as v}from"./uni-search-bar.d696b4f4.js";import{r as w}from"./uni-app.es.d80a2aae.js";import{_ as M,a as R}from"./uni-list.0bd2f08c.js";import{_ as x}from"./uni-load-state.2759c079.js";import{_ as C}from"./unicloud-db.613f4f07.js";import{s as H}from"./uni-status-bar.e9775686.js";import{t as E}from"./publish-time.4a9adb49.js";import{_ as L}from"./_plugin-vue_export-helper.cdc0426e.js";import"./uni-icons.529be291.js";const P=e.database();const N=L({components:{statusBar:H},computed:{inputPlaceholder:e=>"en"==a("CURRENT_LANG")?"Please enter the search content":"请输入搜索内容",colList(){return[P.collection("uni-cms-articles").where(this.where).field("thumbnail,title,publish_date,user_id").getTemp(),P.collection("uni-id-users").field("_id,nickname").getTemp()]}},data:()=>({adpid:"",where:'"article_status" == 1',showRefresh:!1,listHeight:0,mpButtonPlaceholderSize:87,navBarHeight:44}),async onReady(){this.listHeight="auto"},methods:{initNavBarSize(){let e=uni.getMenuButtonBoundingClientRect();this.mpButtonPlaceholderSize=e.width+10,this.navBarHeight=s().system.toLowerCase().includes("ios")?44:48},publishTime:e=>E(e),searchClick(e){t(),r({url:"/uni_modules/uni-cms-article/pages/search/search"})},retry(){this.refresh()},refresh(){this.$refs.udb.loadData({clear:!0},(()=>{i()}))},loadMore(){this.$refs.udb.loadMore()},onqueryerror(e){console.error(e)}},onPullDownRefresh(){this.refresh()},onReachBottom(){this.$refs.udb.loadMore()}},[["render",function(e,a,s,t,r,i){const H=f("statusBar"),E=d,L=w(_("uni-search-bar"),v),P=B,N=j,T=k,$=w(_("uni-list-item"),M),z=w(_("uni-load-state"),x),q=w(_("uni-list"),R),S=w(_("unicloud-db"),C);return l(),o(E,{class:"pages"},{default:n((()=>[u(E,{class:"placeholder-bar"},{default:n((()=>[u(H),u(E,{style:c({height:`${r.navBarHeight}px`})},null,8,["style"])])),_:1}),u(E,{class:"nav-box"},{default:n((()=>[u(E,{class:"nav",style:c({height:`${r.navBarHeight}px`})},{default:n((()=>[u(E,{class:"uni-search-box"},{default:n((()=>[u(L,{ref:"searchBar",radius:"100",cancelButton:"none",disabled:"",placeholder:i.inputPlaceholder},null,8,["placeholder"]),u(E,{class:"cover-search-bar",onClick:i.searchClick},null,8,["onClick"])])),_:1})])),_:1},8,["style"])])),_:1}),u(S,{ref:"udb",onError:i.onqueryerror,collection:i.colList,"page-size":10,orderby:"publish_date desc"},{default:n((({data:a,pagination:s,hasMore:t,loading:d,error:f,options:_})=>[u(q,{class:"uni-list",border:!1,style:c({height:r.listHeight})},{default:n((()=>[(l(!0),h(m,null,p(a,((a,s)=>(l(),o($,{to:"/uni_modules/uni-cms-article/pages/detail/detail?id="+a._id,key:s},{header:n((()=>[u(P,{class:"thumbnail",src:a.thumbnail,mode:"aspectFill"},null,8,["src"])])),body:n((()=>[u(E,{class:"main"},{default:n((()=>[u(N,{class:"title"},{default:n((()=>[b(g(a.title),1)])),_:2},1024),u(E,{class:"info"},{default:n((()=>[u(N,{class:"author"},{default:n((()=>[b(g(a.user_id[0]?a.user_id[0].nickname:""),1)])),_:2},1024),u(N,{class:"publish_date"},{default:n((()=>[b(g(i.publishTime(a.publish_date)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),s>0&&(s+1)%1==0?(l(),o(E,{key:0,class:"ad-view"},{default:n((()=>[u(T,{adpid:r.adpid,onError:e.aderror},null,8,["adpid","onError"])])),_:1})):y("",!0)])),_:2},1032,["to"])))),128)),u(z,{onNetworkResume:i.refresh,state:{data:a,pagination:s,hasMore:t,loading:d,error:f},onLoadMore:i.loadMore},null,8,["onNetworkResume","state","onLoadMore"])])),_:2},1032,["style"])])),_:1},8,["onError","collection"])])),_:1})}],["__scopeId","data-v-5358429a"]]);export{N as default};
