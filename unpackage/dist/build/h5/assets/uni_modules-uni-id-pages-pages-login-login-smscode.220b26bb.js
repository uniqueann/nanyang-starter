import{E as o,Q as e,o as s,c as t,w as a,i as n,b as i,k as p,l as c,m as r,j as u,W as l}from"./index.694e3e81.js";import{_ as m}from"./uni-id-pages-sms-form.3649a121.js";import{r as d}from"./uni-app.es.1115fc62.js";import{_ as f}from"./uni-forms.274de554.js";import{_ as h}from"./uni-popup-captcha.8210071a.js";import{m as g}from"./login-page.mixin.d37ff379.js";import{_ as j}from"./_plugin-vue_export-helper.cdc0426e.js";import"./uni-captcha.9f56c2d5.js";import"./uni-icons.d5573f5e.js";import"./uni-easyinput.286b1c02.js";import"./uni-popup.f59d596a.js";import"./store.a5f21933.js";const _=j({mixins:[g],data:()=>({code:"",phone:"",captcha:"",logo:"/static/logo.png"}),computed:{tipText(){return"验证码已通过短信发送至"+this.phone}},onLoad({phoneNumber:o}){this.phone=o},onShow(){document.onkeydown=o=>{var e=o||window.event;e&&13==e.keyCode&&this.submit()}},methods:{submit(){const s=o.importObject("uni-id-co",{errorOptions:{type:"toast"}});if(6!=this.code.length)return this.$refs.smsCode.focusSmsCodeInput=!0,e({title:"验证码不能为空",icon:"none",duration:3e3});s.loginBySms({mobile:this.phone,code:this.code,captcha:this.captcha}).then((o=>{this.loginSuccess(o)})).catch((o=>{"uni-id-captcha-required"==o.errCode?this.$refs.popup.open():console.log(o.errMsg)})).finally((o=>{this.captcha=""}))}}},[["render",function(o,e,g,j,_,b){const y=c,C=n,x=r,V=d(u("uni-id-pages-sms-form"),m),k=l,w=d(u("uni-forms"),f),v=d(u("uni-popup-captcha"),h);return s(),t(C,{class:"uni-content"},{default:a((()=>[i(C,{class:"login-logo"},{default:a((()=>[i(y,{src:_.logo},null,8,["src"])])),_:1}),i(x,{class:"title"},{default:a((()=>[p("请输入验证码")])),_:1}),i(x,{class:"tip"},{default:a((()=>[p("先输入图形验证码，再获取短信验证码")])),_:1}),i(w,null,{default:a((()=>[i(V,{focusCaptchaInput:"",modelValue:_.code,"onUpdate:modelValue":e[0]||(e[0]=o=>_.code=o),type:"login-by-sms",ref:"smsCode",phone:_.phone},null,8,["modelValue","phone"]),i(k,{class:"uni-btn send-btn",type:"primary",onClick:b.submit},{default:a((()=>[p("登录")])),_:1},8,["onClick"])])),_:1}),i(v,{onConfirm:b.submit,modelValue:_.captcha,"onUpdate:modelValue":e[1]||(e[1]=o=>_.captcha=o),scene:"login-by-sms",ref:"popup"},null,8,["onConfirm","modelValue"])])),_:1})}],["__scopeId","data-v-93225fe2"]]);export{_ as default};
