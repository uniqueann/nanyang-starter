"use strict";const e=require("./vendor.js"),o=require("../uni-starter.config.js"),s=e.Ds.database();exports.initApp=async function(){o.config.debug,setTimeout((()=>{getApp({allowDefault:!0}).globalData.config=o.config}),1),s.on("error",(function({code:e,message:o}){console.log("onDBError",{code:e,message:o}),console.error(e,o)})),e.Ds.interceptObject({async invoke({objectName:o,methodName:s,params:n}){"uni-id-co"==o&&(s.includes("loginBy")||["login","registerUser"].includes(s))&&(console.log("执行登录相关云对象"),n[0].inviteCode=await new Promise((o=>{e.index.getClipboardData({success:function(e){if(console.log("剪切板内容："+e.data),"uniInvitationCode:"==e.data.slice(0,18)){let s=e.data.slice(18,38);console.log("当前用户是其他用户推荐下载的,推荐者的code是："+s),o(s)}else o()},fail(){console.log("error--"),o()},complete(){e.index.hideToast()}})})))},success(e){console.log(e)},complete(){},fail(e){console.error(e)}})};
