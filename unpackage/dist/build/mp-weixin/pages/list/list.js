"use strict";const e=require("../../common/vendor.js");let o;const t=new(require("../../uni_modules/json-gps/js_sdk/gps.js").Gps),s=e.Ds.database(),n={components:{statusBar:()=>"../../uni_modules/uni-nav-bar/components/uni-nav-bar/uni-status-bar.js"},computed:{inputPlaceholder:o=>"en"==e.index.getStorageSync("CURRENT_LANG")?"Please enter the search content":"请输入搜索内容",colList(){return[s.collection("opendb-news-articles").where(this.where).field("avatar,title,last_modify_date,user_id").getTemp(),s.collection("uni-id-users").field("_id,nickname").getTemp()]}},data:()=>({where:'"article_status" == 1',keyword:"",showRefresh:!1,listHight:0}),watch:{keyword(e,o){let t='"article_status" == 1 ';this.where=e?t+`&& /${e}/.test(title)`:t}},async onReady(){this.listHight="auto",o=this.$refs.udb},async onShow(){this.keyword=getApp().globalData.searchText,getApp().globalData.searchText="",await t.getLocation({geocode:!0})},methods:{searchClick(o){e.index.hideKeyboard(),e.index.navigateTo({url:"/pages/list/search/search",animationType:"fade-in"})},retry(){this.refresh()},refresh(){o.loadData({clear:!0},(()=>{e.index.stopPullDownRefresh(),console.log("end")})),console.log("refresh")},loadMore(){o.loadMore()},onqueryerror(e){console.error(e)},onpullingdown(e){console.log(e),this.showRefresh=!0,e.pullingDistance>100&&this.refresh()}},onPullDownRefresh(){this.refresh()},onReachBottom(){this.loadMore()}};if(!Array){(e.resolveComponent("statusBar")+e.resolveComponent("uni-search-bar")+e.resolveComponent("uni-dateformat")+e.resolveComponent("uni-list-item")+e.resolveComponent("uni-load-state")+e.resolveComponent("uni-list")+e.resolveComponent("unicloud-db"))()}Math||((()=>"../../uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar.js")+(()=>"../../uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.js")+(()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../components/uni-load-state/uni-load-state.js")+(()=>"../../uni_modules/uni-list/components/uni-list/uni-list.js")+(()=>"../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js"))();const a=e._export_sfc(n,[["render",function(o,t,s,n,a,i){return{a:e.sr("searchBar","8ebc7804-1"),b:e.o((e=>a.keyword=e)),c:e.p({radius:"100",cancelButton:"none",disabled:!0,placeholder:i.inputPlaceholder,modelValue:a.keyword}),d:e.o(((...e)=>i.searchClick&&i.searchClick(...e))),e:e.w((({data:o,pagination:t,hasMore:s,loading:n,error:a,options:i},r,l)=>({a:e.f(o,((o,t,s)=>({a:o.avatar,b:e.t(o.title),c:e.t(o.user_id[0]?o.user_id[0].nickname:""),d:"8ebc7804-5-"+l+"-"+s+",8ebc7804-4-"+l+"-"+s,e:e.p({date:o.last_modify_date,format:"yyyy-MM-dd",threshold:[6e4,2592e6]}),f:t,g:"8ebc7804-4-"+l+"-"+s+",8ebc7804-3-"+l,h:e.p({to:"/pages/list/detail?id="+o._id+"&title="+o.title})}))),b:"8ebc7804-6-"+l+",8ebc7804-3-"+l,c:e.p({state:{data:o,pagination:t,hasMore:s,loading:n,error:a}}),d:"8ebc7804-3-"+l+",8ebc7804-2",e:l,f:r})),{name:"d",path:"e",vueId:"8ebc7804-2"}),f:e.o(i.refresh),g:e.o(i.loadMore),h:a.listHight,i:e.p({border:!1}),j:e.sr("udb","8ebc7804-2"),k:e.o(i.onqueryerror),l:e.p({collection:i.colList,"page-size":10})}}],["__scopeId","data-v-8ebc7804"]]);wx.createPage(a);
