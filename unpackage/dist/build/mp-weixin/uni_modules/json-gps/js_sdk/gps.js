"use strict";const o=require("../../../common/vendor.js");exports.Gps=class{constructor(o){this.lock=!1}async getLocation(e={type:"wgs84"}){return new Promise((async t=>{if(this.lock)return t(!1),!1;this.lock=!0,o.index.getLocation({...e,success:o=>{this.lock=!1,t(o)},fail:async e=>{o.index.showToast({title:"定位获取失败",icon:"none"}),console.error(e),t(!1),"getLocation:fail auth deny"==e.errMsg&&o.index.showModal({content:"应用无定位权限",confirmText:"前往设置",complete:e=>{e.confirm&&o.index.openSetting({success(o){console.log(o.authSetting)}}),this.lock=!1}}),"getLocation:fail:ERROR_NOCELL&WIFI_LOCATIONSWITCHOFF"==e.errMsg&&o.index.showModal({content:"未开启定位权限，请前往手机系统设置中开启",showCancel:!1,confirmText:"知道了"})}})}))}};
