"use strict";const e=require("../../../../common/vendor.js"),i=require("../../common/publish-time.js"),t=e.Ds.database(),o={components:{statusBar:()=>"../../../uni-nav-bar/components/uni-nav-bar/uni-status-bar.js"},computed:{inputPlaceholder:i=>"en"==e.index.getStorageSync("CURRENT_LANG")?"Please enter the search content":"请输入搜索内容",colList(){return[t.collection("uni-cms-articles").where(this.where).field("thumbnail,title,publish_date,user_id").getTemp(),t.collection("uni-id-users").field("_id,nickname").getTemp()]}},data:()=>({adpid:"",where:'"article_status" == 1',showRefresh:!1,listHeight:0,mpButtonPlaceholderSize:87,navBarHeight:44}),async onReady(){this.initNavBarSize(),this.listHeight="auto"},methods:{initNavBarSize(){let i=e.index.getMenuButtonBoundingClientRect();this.mpButtonPlaceholderSize=i.width+10,this.navBarHeight=e.index.getSystemInfoSync().system.toLowerCase().includes("ios")?44:48},publishTime:e=>i.translatePublishTime(e),searchClick(i){e.index.hideKeyboard(),e.index.navigateTo({url:"/uni_modules/uni-cms-article/pages/search/search"})},retry(){this.refresh()},refresh(){this.$refs.udb.loadData({clear:!0},(()=>{e.index.stopPullDownRefresh()}))},loadMore(){this.$refs.udb.loadMore()},onqueryerror(e){console.error(e)},aderror(e){console.log("aderror: "+JSON.stringify(e.detail))}},onPullDownRefresh(){this.refresh()},onReachBottom(){this.$refs.udb.loadMore()}};if(!Array){(e.resolveComponent("statusBar")+e.resolveComponent("uni-search-bar")+e.resolveComponent("uniad")+e.resolveComponent("uni-list-item")+e.resolveComponent("uni-load-state")+e.resolveComponent("uni-list")+e.resolveComponent("unicloud-db"))()}Math||((()=>"../../../uni-search-bar/components/uni-search-bar/uni-search-bar.js")+(()=>"../../../../node-modules/@dcloudio/uni-components/lib/uniad/uniad.js")+(()=>"../../../uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../../../components/uni-load-state/uni-load-state.js")+(()=>"../../../uni-list/components/uni-list/uni-list.js")+(()=>"../../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js"))();const n=e._export_sfc(o,[["render",function(i,t,o,n,s,r){return{a:`${s.navBarHeight}px`,b:e.sr("searchBar","9507f685-2"),c:e.p({radius:"100",cancelButton:"none",disabled:!0,placeholder:r.inputPlaceholder}),d:e.o(((...e)=>r.searchClick&&r.searchClick(...e))),e:`${s.mpButtonPlaceholderSize}px`,f:`${s.navBarHeight}px`,g:e.w((({data:i,pagination:t,hasMore:o,loading:n,error:a,options:l},d,u)=>({a:e.f(i,((i,t,o)=>e.e({a:i.thumbnail,b:e.t(i.title),c:e.t(i.user_id[0]?i.user_id[0].nickname:""),d:e.t(r.publishTime(i.publish_date)),e:t>0&&(t+1)%1==0},t>0&&(t+1)%1==0?{f:e.o(r.aderror,t),g:e.p({adpid:s.adpid})}:{},{h:t,i:"9507f685-5-"+u+"-"+o+",9507f685-4-"+u,j:e.p({to:"/uni_modules/uni-cms-article/pages/detail/detail?id="+i._id})}))),b:"9507f685-6-"+u+",9507f685-4-"+u,c:e.p({state:{data:i,pagination:t,hasMore:o,loading:n,error:a}}),d:"9507f685-4-"+u+",9507f685-3",e:u,f:d})),{name:"d",path:"g",vueId:"9507f685-3"}),h:e.o(r.refresh),i:e.o(r.loadMore),j:s.listHeight,k:e.p({border:!1}),l:e.sr("udb","9507f685-3"),m:e.o(r.onqueryerror),n:e.p({collection:r.colList,"page-size":10,orderby:"publish_date desc"})}}],["__scopeId","data-v-9507f685"]]);wx.createPage(n);
